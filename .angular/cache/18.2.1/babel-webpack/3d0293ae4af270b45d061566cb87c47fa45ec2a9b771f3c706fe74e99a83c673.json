{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { LeaveModel } from 'src/app/modals/leavemodel';\nimport Swal from 'sweetalert2';\nlet ApplyleaveComponent = class ApplyleaveComponent {\n  constructor(leaveservice, fb, authservice, lmsservice) {\n    this.leaveservice = leaveservice;\n    this.fb = fb;\n    this.authservice = authservice;\n    this.lmsservice = lmsservice;\n    this.from = '';\n    this.to = '';\n    this.noDays = '';\n    this.daysdiff = '';\n    authservice.apiData$.subscribe(data => this.loginData = data);\n  }\n  ngOnInit() {\n    this.getLeave();\n    this.leavebalance();\n    // this.noDays= Math.floor((Date.UTC(this.to.getFullYear(), this.to.getMonth(), this.to.getDate()) - Date.UTC(this.from.getFullYear(), this.from.getMonth(), this.from.getDate()) ) /(1000 * 60 * 60 * 24));\n    // console.log('noofdays',this.noDays);\n    this.leaveform = this.fb.group({\n      symbol: ['', [Validators.required]],\n      fromDate: ['', [Validators.required]],\n      toDate: ['', [Validators.required]],\n      reason: ['', [Validators.required]],\n      noOfDays: ['', [Validators.required]]\n    });\n    console.log(\"data\", this.loginData);\n    console.log(\"datid\", this.loginData.Empid);\n    console.log(\"datid\", this.leaveform.value);\n  }\n  sumbitLeave() {\n    console.log(\"form\", this.leaveform.value);\n    const leaveformData = this.leaveform.value;\n    var from = leaveformData.fromDate.split('T');\n    var to = leaveformData.toDate.split('T');\n    console.log('dates', from[0], to[0]);\n    this.newdata = new LeaveModel();\n    this.newdata.employeeId = this.loginData.Empid;\n    this.newdata.fromDate = from;\n    this.newdata.toDate = to;\n    this.newdata.symbol = leaveformData.symbol;\n    this.newdata.noOfDays = leaveformData.noOfDays;\n    this.newdata.reason = leaveformData.reason;\n    this.leaveservice.addleave(this.newdata).subscribe(res => {\n      this.addleavemessage = res;\n      console.log(this.addleavemessage);\n      Swal.fire({\n        text: this.addleavemessage.message\n      });\n    });\n  }\n  getLeave() {\n    this.leaveservice.getLeaveType().subscribe(result => {\n      this.leavedata = result;\n      console.log(\"leavedata\", this.leavedata);\n    });\n  }\n  onInputChange() {\n    console.log(\"diff of days\");\n    const fdate = new Date(this.leaveform.get('fromDate')?.value);\n    const tdate = new Date(this.leaveform.get('toDate')?.value);\n    console.log(\"diff of days====\", fdate, tdate);\n    const timeDifference = tdate.getTime() - fdate.getTime();\n    this.daysdiff = timeDifference / (1000 * 3600 * 24);\n    console.log(\"diff of days==\", this.daysdiff);\n  }\n  leavebalance() {\n    this.lmsservice.getleavebalance(this.loginData.Empid).subscribe(data => {\n      this.leavebal = data[0];\n      console.log(\"leavebal\", this.leavebal);\n    });\n  }\n};\nApplyleaveComponent = __decorate([Component({\n  selector: 'app-applyleave',\n  templateUrl: './applyleave.component.html',\n  styleUrls: ['./applyleave.component.css']\n})], ApplyleaveComponent);\nexport { ApplyleaveComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}